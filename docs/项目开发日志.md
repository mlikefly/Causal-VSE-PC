# Causal-VSE-PC 项目开发日志

## 项目状态

**当前版本**: 2.0.0  
**最后更新**: 2024-12-13

## 已完成功能

### 核心加密 ✅
- [x] Layer 1: 空域混沌置乱（Arnold + 5D超混沌）
- [x] Layer 2: 频域语义控制（FFT/DWT）
- [x] Layer 3: 字节级流加密（ChaCha20）
- [x] 分层密钥系统（PBKDF2 + HMAC）
- [x] 加密/解密可逆性验证

### 因果推断 ✅
- [x] ATE（平均处理效应）计算
- [x] CATE（条件平均处理效应）计算
- [x] 自适应隐私预算分配
- [x] 语义区域分类（敏感/任务/背景）

### 安全评估 ✅
- [x] 信息熵计算
- [x] NPCR/UACI计算
- [x] 相邻像素相关性
- [x] Chi-square检验
- [x] NIST随机性测试

### 神经网络 ✅
- [x] U-Net显著性检测器

## 当前指标

| 指标 | 当前值 | 目标 | 状态 |
|------|--------|------|------|
| 信息熵 | 7.99 bits | ≥ 7.9 | ✅ |
| NPCR | 99.64% | ≥ 99.5% | ✅ |
| UACI | 33.37% | 30-36% | ✅ |
| 相关性 | < 0.01 | < 0.1 | ✅ |
| Chi-square | p=0.00 | p > 0.05 | ❌ |
| NIST Monobit | p=0.00 | p > 0.01 | ❌ |
| 解密PSNR | ~21 dB | > 40 dB | ❌ |

## 待解决问题

### P0 - 关键问题
1. **MAE差异化不明显**: 不同privacy_level的MAE几乎相同（~0.328）
   - 原因: 频域归一化抹平了差异
   - 方案: 调整归一化策略或在Layer 1增强差异

2. **解密PSNR下降**: 从90+dB降至21dB
   - 原因: 频域解密参数恢复问题
   - 方案: 检查mag_scale保存/恢复逻辑

### P1 - 高优先级
3. **统计测试失败**: Chi-square和NIST Monobit未通过
   - 原因: 加密后分布非均匀
   - 方案: 增强混沌序列质量或添加后处理

## 版本历史

### v2.0.0 (2024-12-13)
- 重构项目结构
- 修复Arnold映射逆向问题
- 添加因果推断模块
- 完善安全评估

### v1.0.0 (2024-11-30)
- 初始版本
- 基础SCNE加密实现
